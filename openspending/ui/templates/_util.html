<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip=""
  >

  <!--! Herein can be found generic helper methods for a whole bunch of common
        templating issues -->

  <py:def function="script_tag(name)">
    <py:choose test="g.debug">
      <script py:when="True" src="${h.static('js/%s.js' % name)}"></script>
      <script py:otherwise="" src="${h.static('js/%s.min.js' % name)}"></script>
    </py:choose>
  </py:def>

  <span py:def="currency_symbols(currency)">
    <py:if test="">&ndash;</py:if>
  </span>

  <div py:def="entries_page(dataset, page)">
    <table class="zebra-striped">
      <thead>
        <tr>
          <th>Time</th>
          <th>Spender</th>
          <th>Recipient</th>
          <th class="num">Amount</th>
          <th>&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <tr py:for="entry in page">
          <td width="12%">${entry.get('time')}</td>
          <td>
            <a py:if="entry.get('from.id')"
              href="${h.url_for(controller='classifier', action='view',
              dataset=dataset.name, taxonomy='entity',
              name=entry.get('from.name'))}">${entry.get('from.label')}</a></td>
          <td>
            <a py:if="entry.get('to.id')"
              href="${h.url_for(controller='classifier', action='view',
              dataset=dataset.name, taxonomy='entity',
              name=entry.get('to.name'))}">${entry.get('to.label')}</a></td>
          <td class="num">
            ${h.format_number_with_commas(
                entry.get('amount'))}
            ${entry.get('currency')}
          </td>
          <td>
            <a href="${h.entry_url(dataset.name, entry)}">
              details&raquo;
            </a>
          </td>
        </tr>
      </tbody>
    </table>
    ${page.pager()}
  </div>

  <div py:def="view_panel(viewstate)" class="view-panel last">
    <ul class="tabs">
      <py:for each="view in viewstate.available_views">
        <py:if test="view.name==viewstate.view.name">
          <li class="active"><a>${view.label}</a></li>
        </py:if>
        <py:if test="view.name!=viewstate.view.name">
          <li><a href="?_view=${view.name}">${view.label}</a></li>
        </py:if>
      </py:for>
      <li class="dropdown" data-dropdown="dropdown">
        <a href="#" class="dropdown-toggle">${c.time}</a>
        <ul class="dropdown-menu">
          <py:for each="time in c.times">
            <li py:if="c.time != time">
              <a href="?_view=${viewstate.view.name}&amp;_time=${time}">${time}</a>
            </li>
          </py:for>
        </ul>
      </li>
    </ul>
  </div>

</html>
