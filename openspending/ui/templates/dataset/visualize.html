<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip="">

  <xi:include href="_nav.html" />

  <py:def function="nav_class">nav-dataset</py:def>

  <py:def function="page_title">Visualize</py:def>

  <py:def function="optional_head">
    <!-- templates/dataset/explorer.html optional_head -->

    <style>
      .inactive a {
        color: #ddd;
        cursor: default;
      }

      #editor {
        min-height: 20em;
      }

    </style>
  </py:def>

  <py:def function="scripts">
    <!-- templates/dataset/explorer.html scripts -->
    ${script_tag('lib/vendor/backbone')}
    ${script_tag('lib/widgets')}

    <script type="text/javascript">
      var widgets = ${h.json.dumps(c.widgets)};

      jQuery(function($) {
        window.app = new OpenSpending.Widgets.Editor({
          elem: $('#editor'),
          widgets: widgets,
          context: {
              dataset: '${c.dataset.name}',
              siteUrl: '${h.site_url()}'
            }
        });
      });
    </script>
  </py:def>

  <py:def function="page_title">Visualize</py:def>
  
  <div py:def="content" id="content" py:strip="">
    <!-- templates/dataset/explorer.html content -->
    ${dataset_nav('visualize')}

    <ul id="stages" class="nav nav-pills">
      <li id='menu-choose' class="active">
        <a href='#'>1. Select visualisation</a>
      </li>
      <li id='menu-configure' class="inactive"><a href='#'>2. Configure</a></li>
      <li id='menu-use' class="inactive"><a href='#'>3. Save and embed</a></li>
    </ul>

    <div id="editor">
      
    </div>
  </div>

  <xi:include href="../layout.html" />
</html>
